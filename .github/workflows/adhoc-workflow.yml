---
name: AWS Terragrunt Ad Hoc Action
on:
  workflow_dispatch:
    inputs:
      path:
        description: 'Path to Run `terragrunt run-all apply` from'
        required: true
        type: environment
      verb:
        description: 'Terragrunt Verb'
        default: plan
        type: choice
        required: true
        options:
          - plan
          - apply
      environment:
        description: 'Environment to run tests against'
        type: environment
        required: true

permissions:
  contents: read
  checks: write
  statuses: write
  pull-requests: write
  id-token: write   # This is required for requesting the JWT

jobs:
  echo foo:
    name: echo foo

    steps:
      - name: echo git env vars
        run: |
          env | grep -i git
      - name: foo
        run: |
          echo foo
          echo Verb: $VERB