---
name: AWS Terragrunt Ad Hoc Action
on:
  workflow_dispatch:
    inputs:
      path:
        description: 'Path to Run `terragrunt run-all apply` from'
        #required: true
        type: environment
      verb:
        description: 'Terragrunt Verb'
        default: plan
        type: choice
        required: true
        options:
          - plan
          - apply
      name:
        type: choice
        description: Who to greet
        options:
          - monalisa
          - cschleiden
      message:
        required: true
      use-emoji:
        type: boolean
        description: Include ðŸŽ‰ðŸ¤£ emojis
      environment:
        type: environment

permissions:
  contents: read
  checks: write
  statuses: write
  pull-requests: write
  id-token: write   # This is required for requesting the JWT

jobs:
  echo foo:
    name: echo foo

    steps:
      - name: echo git env vars
        run: |
          env | grep -i git
      - name: foo
        run: |
          echo foo
          echo Verb: $VERB